--- libpng-1.2.19/scripts/makefile.gcmmx~	2007-08-18 12:33:48.000000000 +0200
+++ libpng-1.2.19/scripts/makefile.gcmmx	2007-08-19 00:46:42.000000000 +0200
@@ -45,8 +45,8 @@
 # Where the zlib library and include files are located.
 #ZLIBLIB=/usr/local/lib
 #ZLIBINC=/usr/local/include
-ZLIBLIB=../zlib
-ZLIBINC=../zlib
+ZLIBLIB=/usr/lib
+ZLIBINC=
 
 ALIGN=
 # for i386:
@@ -60,8 +60,8 @@
 
 # Remove -DPNG_THREAD_UNSAFE_OK if you need thread safety
 ### for generic gcc:
-CFLAGS=-DPNG_THREAD_UNSAFE_OK -I$(ZLIBINC) -Wall -O \
-	$(ALIGN) -funroll-loops \
+CFLAGS=-DPNG_USE_PNGGCCRD -I$(ZLIBINC) -Wall \
+	$(OPT_FLAGS) $(ALIGN) \
 	-fomit-frame-pointer  # $(WARNMORE) -g -DPNG_DEBUG=5
 ### for gcc 2.95.2 on 686:
 #CFLAGS=-DPNG_THREAD_UNSAFE_OK -I$(ZLIBINC) -Wall -O \
--- libpng-1.2.19/scripts/makefile.linux~	2007-08-18 12:33:48.000000000 +0200
+++ libpng-1.2.19/scripts/makefile.linux	2007-08-19 00:49:15.000000000 +0200
@@ -34,8 +34,8 @@
 # Where the zlib library and include files are located.
 #ZLIBLIB=/usr/local/lib
 #ZLIBINC=/usr/local/include
-ZLIBLIB=../zlib
-ZLIBINC=../zlib
+ZLIBLIB=/usr/lib
+ZLIBINC=
 
 ALIGN=
 # for i386:
@@ -47,7 +47,7 @@
 
 # for pgcc version 2.95.1, -O3 is buggy; don't use it.
 
-CFLAGS=-I$(ZLIBINC) -Wall -O3 -funroll-loops -DPNG_NO_MMX_CODE \
+CFLAGS=-I$(ZLIBINC) -Wall $(OPT_FLAGS) -funroll-loops \
 	$(ALIGN) # $(WARNMORE) -g -DPNG_DEBUG=5
 
 LDFLAGS=-L. -Wl,-rpath,. -L$(ZLIBLIB) -Wl,-rpath,$(ZLIBLIB) -lpng12 -lz -lm
