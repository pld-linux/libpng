--- libpng-1.0.9/pngrutil.c.badchunk	Wed Jan 31 12:56:47 2001
+++ libpng-1.0.9/pngrutil.c	Tue Feb  6 10:42:15 2001
@@ -1068,6 +1068,12 @@
    prefix_length = profile - chunkdata;
    chunkdata = png_decompress_chunk(png_ptr, compression_type, chunkdata,
                                     slength, prefix_length, &data_length);
+   if(chunkdata)
+	   png_set_iCCP(png_ptr, info_ptr, chunkdata, compression_type,
+			   chunkdata + prefix_length, data_length);
+   else
+	   png_set_iCCP(png_ptr, info_ptr, chunkdata, compression_type,
+			   0x00, prefix_length);
 
    profile_length = data_length - prefix_length;
 
